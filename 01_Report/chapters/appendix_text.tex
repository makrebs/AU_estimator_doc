\chapter{Derivatives}
\label{app:derivatives}

\section{Derivative of Cross Product}
\label{sec:app_d_cross_product}
The derivative of a cross product can be calculated analogue to matrix derivatives.
The skew symmetric cross matrix is
\begin{equation}
\mathbf{a}^\times = \left[
\begin{array}{ccc}
0 & -a_3 & a_2 \\
a_3 & 0 & -a_1 \\
-a_2 & a_1 & 0
\end{array} \right]
\end{equation}
and the appropriate derivatives are therefore
\begin{equation}
\frac{\partial}{\partial \mathbf{a}} \left( \mathbf{a} \times \mathbf{b} \right)
= - \mathbf{b}^\times
\end{equation}
and
\begin{equation}
\frac{\partial}{\partial \mathbf{a}} \left( \mathbf{b} \times \mathbf{a} \right)
=  \mathbf{b}^\times
\end{equation}

\section{Derivative w.r.t. Gibbs-Rodriquez Parameters}
\label{sec:app_dwrt_rodriquez}
The derivative of the direction cosine transform \eqref{eq:rod_to_C} w.r.t. the Gibbs-Rodriquez parameters is

\begin{equation*}
\frac{\partial \mathbf{C}}{\partial \lambda_1} = 
\left(\begin{array}{ccc} 
\frac{4\, {\lambda_1}\, \left({{\lambda_2}}^2 + {{\lambda_3}}^2\right)}{\nu}^2 & 
\frac{2\, {\lambda_2}}{\nu} + \frac{4\, {\lambda_1}\, {\lambda_3} - {\lambda_1}\, {\lambda_2}}{\nu^2} & 
\frac{2\, {\lambda_3}}{\nu} - \frac{4\, {\lambda_1}\, \left({\lambda_2} + {\lambda_1}\, {\lambda_3}\right)}{\nu^2}\\ 
\frac{2\, {\lambda_2}}{\nu} - \frac{4\, {\lambda_1}\, \left({\lambda_3} + {\lambda_1}\, {\lambda_2}\right)}{\nu^2} & 
\frac{4\, {\lambda_1}\, \left({{\lambda_1}}^2 + {{\lambda_3}}^2\right)}{\nu^2} - \frac{4\, {\lambda_1}}{\nu} &
\frac{4\, {\lambda_1}\, \left({\lambda_1} - {\lambda_2}\, {\lambda_3}\right)}{\nu^2} - \frac{2}{\nu}\\
\frac{2\, {\lambda_3}}{\nu} + \frac{4\, {\lambda_1}\, \left({\lambda_2} - {\lambda_1}\, {\lambda_3}\right)}{\nu^2} &
\frac{2}{\nu} - \frac{4\, {\lambda_1}\, \left({\lambda_1} + {\lambda_2}\, {\lambda_3}\right)}{\nu^2} & \frac{4\, {\lambda_1}\, \left({{\lambda_1}}^2 + {{\lambda_2}}^2\right)}{\nu^2} - \frac{4\, {\lambda_1}}{\nu}
\end{array}\right)
\end{equation*}

\begin{equation*}
\frac{\partial \mathbf{C}}{\partial \lambda_2} = 
\left(\begin{array}{ccc} 
\frac{4\, {\lambda_2}\, \left({{\lambda_2}}^2 + {{\lambda_3}}^2\right)}{{\nu}^2} - \frac{4\, {\lambda_2}}{\nu} &
\frac{2\, {\lambda_1}}{\nu} + \frac{4\, {\lambda_2}\, \left({\lambda_3} - {\lambda_1}\, {\lambda_2}\right)}{{\nu}^2} &
\frac{2}{\nu} - \frac{4\, {\lambda_2}\, \left({\lambda_2} + {\lambda_1}\, {\lambda_3}\right)}{{\nu}^2}\\
\frac{2\, {\lambda_1}}{\nu} - \frac{4\, {\lambda_2}\, \left({\lambda_3} + {\lambda_1}\, {\lambda_2}\right)}{{\nu}^2} &
\frac{4\, {\lambda_2}\, \left({{\lambda_1}}^2 + {{\lambda_3}}^2\right)}{{\nu}^2} & \frac{2\, {\lambda_3}}{\nu} + \frac{4\, {\lambda_2}\, \left({\lambda_1} - {\lambda_2}\, {\lambda_3}\right)}{{\nu}^2}\\
\frac{4\, {\lambda_2}\, \left({\lambda_2} - {\lambda_1}\, {\lambda_3}\right)}{{\nu}^2} - \frac{2}{\nu} &
\frac{2\, {\lambda_3}}{\nu} - \frac{4\, {\lambda_2}\, \left({\lambda_1} + {\lambda_2}\, {\lambda_3}\right)}{{\nu}^2} &
\frac{4\, {\lambda_2}\, \left({{\lambda_1}}^2 + {{\lambda_2}}^2\right)}{{\nu}^2} - \frac{4\, {\lambda_2}}{\nu} \end{array}\right)
\end{equation*}

\begin{equation*}
\frac{\partial \mathbf{C}}{\partial \lambda_3} = 
\left(\begin{array}{ccc} \frac{4\, {\lambda_3}\, \left({{\lambda_2}}^2 + {{\lambda_3}}^2\right)}{{\nu}^2} - \frac{4\, {\lambda_3}}{\nu} & \frac{4\, {\lambda_3}\, \left({\lambda_3} - {\lambda_1}\, {\lambda_2}\right)}{{\nu}^2} - \frac{2}{\nu} & \frac{2\, {\lambda_1}}{\nu} - \frac{4\, {\lambda_3}\, \left({\lambda_2} + {\lambda_1}\, {\lambda_3}\right)}{{\nu}^2}\\ \frac{2}{\nu} - \frac{4\, {\lambda_3}\, \left({\lambda_3} + {\lambda_1}\, {\lambda_2}\right)}{{\nu}^2} & \frac{4\, {\lambda_3}\, \left({{\lambda_1}}^2 + {{\lambda_3}}^2\right)}{{\nu}^2} - \frac{4\, {\lambda_3}}{\nu} & \frac{2\, {\lambda_2}}{\nu} + \frac{4\, {\lambda_3}\, \left({\lambda_1} - {\lambda_2}\, {\lambda_3}\right)}{{\nu}^2}\\ \frac{2\, {\lambda_1}}{\nu} + \frac{4\, {\lambda_3}\, \left({\lambda_2} - {\lambda_1}\, {\lambda_3}\right)}{{\nu}^2} & \frac{2\, {\lambda_2}}{\nu} - \frac{4\, {\lambda_3}\, \left({\lambda_1} + {\lambda_2}\, {\lambda_3}\right)}{{\nu}^2} & \frac{4\, {\lambda_3}\, \left({{\lambda_1}}^2 + {{\lambda_2}}^2\right)}{{\nu}^2} \end{array}\right)
\end{equation*}
where
\begin{equation*}
\nu = {\lambda_1}^2 + {\lambda_2}^2 + {\lambda_3}^2 + 1
\end{equation*}


%\section{Derivative w.r.t. Inertia Tensor A}
%XXX derivative w.r.t inertia tensor components (and it's inverse)

%\section{Derivative w.r.t. Inertia Tensor B}
%XXX derivative w.r.t diagonal inertia tensor and rotation matrix (and it's inverse)
